<!-- Header -->
<h2 class="text-xl sm:text-2xl font-semibold text-gray-800 mb-4 sm:mb-6 text-center sm:text-left">
  {{ readonly ? 'Skabelonvisning' : 'Skabelonredigering' }}
</h2>

<!-- Template Details -->
<form class="space-y-4 sm:space-y-6">
  <!-- Template Title -->
  <div>
    <label for="title" class="block text-sm font-medium text-gray-700 mb-2">Skabelon Titel</label>
    <input
      type="text"
      id="title"
      name="title"
      [(ngModel)]="template.title"
      [disabled]="readonly"
      class="block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base"
      placeholder="Indtast skabelon titel"
    />
  </div>

  <!-- Template Description -->
  <div>
    <label for="description" class="block text-sm font-medium text-gray-700 mb-2">Beskrivelse</label>
    <textarea
      id="description"
      name="description"
      [(ngModel)]="template.description"
      rows="4"
      class="block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm sm:text-base"
      placeholder="Indtast skabelon beskrivelse"
      [disabled]="readonly"
    ></textarea>
  </div>

  <!-- Save and Cancel Buttons -->
  <div class="flex flex-col sm:flex-row justify-end sm:space-x-4 space-y-2 sm:space-y-0">
    <button
      type="button"
      (click)="onCancel()"
      class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg shadow-sm hover:bg-gray-300 focus:ring-2 focus:ring-gray-400 focus:outline-none"
    >
      Annuller
    </button>
    <button *ngIf="!readonly"
            type="button"
            (click)="onSave()"
            class="px-4 py-2 bg-blue-500 text-white rounded-lg shadow-sm hover:bg-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none">
      Gem Skabelon
    </button>
      <button *ngIf="!readonly"
          type="button"
          (click)="onFinalize()"
          class="px-4 py-2 bg-purple-500 text-white rounded-lg shadow-sm hover:bg-purple-600 focus:ring-2 focus:ring-purple-400 focus:outline-none">
    Udgiv
  </button>
  </div>
</form>

<!-- Question List -->
<div class="mt-6 sm:mt-8 mb-3">
  <h3 class="text-lg sm:text-xl font-semibold text-gray-800 mb-4 sm:mb-6">Spørgsmål</h3>
  <ul class="space-y-4">
    <li
      *ngFor="let question of template.questions"
      class="flex flex-col sm:flex-row justify-between items-start sm:items-center p-4 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100"
    >
      <span class="text-gray-800 font-medium">{{ question.prompt }}</span>
      <div class="flex space-x-2 mt-2 sm:mt-0">
        <button
          class="px-3 py-1 text-sm bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"
          (click)="editQuestion(question)"
        >
          {{ readonly ? 'Vis' : 'Rediger' }}
        </button>
        <button
          class="px-3 py-1 text-sm bg-red-500 text-white rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"
          (click)="deleteQuestion(question)"
          [disabled]="readonly"
        >
          Slet
        </button>
      </div>
    </li>
  </ul>

  <!-- Add Question Button -->
  <div class="mt-4 flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0">
    <button *ngIf="!readonly"
        class="px-6 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-blue-400 focus:outline-none"
        (click)="addQuestion()">
      Tilføj Nyt Spørgsmål
    </button>
  </div>
</div>

<app-question-editor
  *ngIf="selectedQuestion"
  [question]="selectedQuestion"
  [readonly]="readonly"
  (save)="onSaveQuestion($event)"
  (cancel)="onCancelEdit()">
</app-question-editor>
